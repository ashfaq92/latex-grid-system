% !TeX root=demo.tex
\ProvidesPackage{grid-system}[2013/08/08 v. 0.1 LaTeX Grid System]

\RequirePackage{calc}
\RequirePackage{ifthen}

%\RequirePackage{forloop}
%\newcounter{index}
%\newcommand{\multiple}[2]{\forloop{index}{0}{\value{index} < #2}{#1 }}

\def\gridsystem@blockwidth#1#2{#1\linewidth/#2}

\newenvironment{block}[1]{%
\begin{minipage}[t]{\gridsystem@blockwidth#1}%
}{%
\end{minipage}%
}

\newlength{\gridsystem@cellsep}
\setlength{\gridsystem@cellsep}{1.75em}

\newlength{\gridsystem@cellsep@corrected}

% Macros to finish cells and rows, so that the areas between cells and rows can be defined very flexibly.
\newcommand{\gridsystem@finishrow}{\bigskip}
\newcommand{\gridsystem@finishcell}{\hspace{\gridsystem@cellsep@corrected}}


\newenvironment{row}[1]{
	%The total space required for the gaps between must be equally distributed to the width of all columns.
	\setlength{\gridsystem@cellsep@corrected}{2\gridsystem@cellsep/#1}%
	\newenvironment{cell}[1]{%
		\begin{minipage}[t]{\gridsystem@blockwidth{##1}{#1}-\gridsystem@cellsep@corrected}%
	}{%
		\end{minipage}\ignorespaces%
		\@ignoretrue% Ignore spaces
		\gridsystem@finishcell%
	}
}{
	\gridsystem@finishrow
}
